

{{ 'from-the-journal.css' | asset_url | stylesheet_tag }}
{%- style -%}
  .from-the-journal {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
  }
  .from-the-journal__heading {
    font-size: {{ section.settings.heading_font_size }}px;
    color: {{ section.settings.heading_color }};
  }
  .from-the-journal__button {
    font-size: {{ section.settings.button_font_size }}px;
    color: {{ section.settings.button_text_color }};
    border-color: {{ section.settings.button_border_color }};
    padding: {{ section.settings.button_padding_vertical }}px {{ section.settings.button_padding_horizontal }}px;
  }
  .from-the-journal__button:hover {
    background-color: {{ section.settings.button_hover_background }};
    color: {{ section.settings.button_hover_text_color }};
  }
  .from-the-journal__articles {
    gap: {{ section.settings.article_gap }}px;
  }
  .from-the-journal__image-wrapper {
    aspect-ratio: {{ section.settings.image_aspect_ratio }};
  }
  .from-the-journal__date {
    font-size: {{ section.settings.date_font_size }}px;
    color: {{ section.settings.date_color }};
  }
  .from-the-journal__title {
    font-size: {{ section.settings.title_font_size }}px;
    color: {{ section.settings.title_color }};
  }
  @media screen and (max-width: 768px) {
    .from-the-journal__image-wrapper {
      aspect-ratio: {{ section.settings.mobile_image_aspect_ratio }};
    }
  }
{%- endstyle -%}

<div class="from-the-journal ">
  <div class="from-the-journal__header">
    <h2 class="from-the-journal__heading">{{ section.settings.heading }}</h2>
    
    {%- if section.settings.button_text != blank and section.settings.button_link != blank -%}
      <a href="{{ section.settings.button_link }}" class="from-the-journal__button">
        {{ section.settings.button_text }}
      </a>
    {%- endif -%}
  </div>
  
  <div class="from-the-journal__articles">
    {%- for block in section.blocks -%}
      <article class="from-the-journal__article" {{ block.shopify_attributes }}>
        {%- if block.settings.image != blank -%}
          <div class="from-the-journal__image-wrapper">
            {%- assign img_url = block.settings.image | img_url: 'master' -%}
            <img 
              class="from-the-journal__image lazyload"
              src="{{ block.settings.image | img_url: '400x' }}"
              data-src="{{ img_url }}"
              alt="{{ block.settings.image.alt | escape }}"
              loading="lazy"
            >
          </div>
        {%- else -%}
          <div class="from-the-journal__image-wrapper">
            {{ 'image' | placeholder_svg_tag: 'from-the-journal__image placeholder-svg' }}
          </div>
        {%- endif -%}
        
        <div class="from-the-journal__content">
          {%- if block.settings.date != blank -%}
            <div class="from-the-journal__date">{{ block.settings.date }}</div>
          {%- endif -%}
          
          {%- if block.settings.title != blank -%}
            <h3 class="from-the-journal__title">{{ block.settings.title }}</h3>
          {%- endif -%}
        </div>
      </article>
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "From the Journal",
  "tag": "section",
  "class": "shopify-section--from-the-journal",
  "max_blocks": 6,
  "settings": [
    {
      "type": "header",
      "content": "Header Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FROM THE JOURNAL"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "min": 16,
      "max": 72,
      "step": 1,
      "unit": "px",
      "label": "Heading font size",
      "default": 32
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "VIEW ALL"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Button font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button border color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button hover text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 10,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 24
    },
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "article_gap",
      "min": 10,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Space between articles",
      "default": 30
    },
    {
      "type": "select",
      "id": "image_aspect_ratio",
      "label": "Desktop image aspect ratio",
      "options": [
        {
          "value": "1/1",
          "label": "Square (1:1)"
        },
        {
          "value": "4/3",
          "label": "Landscape (4:3)"
        },
        {
          "value": "3/4",
          "label": "Portrait (3:4)"
        },
        {
          "value": "16/9",
          "label": "Widescreen (16:9)"
        }
      ],
      "default": "4/3"
    },
    {
      "type": "select",
      "id": "mobile_image_aspect_ratio",
      "label": "Mobile image aspect ratio",
      "options": [
        {
          "value": "1/1",
          "label": "Square (1:1)"
        },
        {
          "value": "3/4",
          "label": "Portrait (3:4)"
        },
        {
          "value": "4/3",
          "label": "Landscape (4:3)"
        }
      ],
      "default": "1/1",
      "info": "Image shape on mobile devices"
    },
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "range",
      "id": "date_font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Date font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "date_color",
      "label": "Date color",
      "default": "#777777"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 14,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Title font size",
      "default": 18
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section top padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section bottom padding",
      "default": 60
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "article",
      "name": "Article",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Article image",
          "info": "Recommended size: 800x600px for 4:3 ratio"
        },
        {
          "type": "text",
          "id": "date",
          "label": "Date",
          "default": "May 10, 2018",
          "info": "Format: Month DD, YYYY"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Article title",
          "default": "Looks we love"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Article link",
          "info": "Optional: Link to full article"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "From the Journal",
      "blocks": [
        {
          "type": "article",
          "settings": {
            "date": "May 10, 2018",
            "title": "Looks we love"
          }
        },
        {
          "type": "article",
          "settings": {
            "date": "May 01, 2018",
            "title": "10 ways to unwind"
          }
        },
        {
          "type": "article",
          "settings": {
            "date": "Apr 30, 2018",
            "title": "Featured designer: Bethany Jones"
          }
        }
      ]
    }
  ]
}
{% endschema %}